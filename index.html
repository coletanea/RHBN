<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles/general.css">
    <title>coletânea RHBN</title>
</head>

<body>

    <main>



        <!-- <header>
            <div id="search">
                <input type="text" id="searchInput" placeholder="Digite a palavra a ser encontrada" class="blinking-cursor">
                <div>
                    <button onclick="search()">Buscar</button>
                    <button id="clear">Limpar</button>
                </div>
            </div>
            <div id="searchResults"></div>
        </header> -->
        <div id="dashb">

            <div>
                <label for="tagCount">coleções</label>
                <h1 id="tagCount">77</h1>
            </div>

            <div>
                <label for="articleCount">artigos</label>
                <h1 id="articleCount">2953</h1>
            </div>

        </div>


        <section id="disclaimer">

            <div>
                <div>
                    <h1>Disclaimer</h1>
                </div>

            </div>
            <article>
                <p>
                    Este site foi criado com a finalidade de preservar e disponibilizar os artigos da Revista de
                    História da Biblioteca Nacional que se encontram originalmente disponíveis no site <a
                        target="_blank" target="_blank" rel="external"
                        href="https://web.archive.org/web/20160802124509/http://www.revistadehistoria.com.br/">Web
                        Archive</a>. A motivação para esta coletânea surgiu diante das dificuldades enfrentadas no
                    acesso aos conteúdos do próprio Web Archive. Nosso intuito principal é proporcionar um acesso mais
                    democrático a tais informações, priorizando o uso didático e acadêmico desses materiais.
                </p>
                <p>
                    Acreditamos que exista uma profunda necessidade, em nossa conjuntura, de posturas que valorizem os
                    saberes acadêmicos e contribuam com a divulgação científica. A crescente onda de desinformação nesta
                    era de pós-verdade tem propiciado o surgimento de narrativas negacionistas e revisionistas que,
                    ardilosamente, subvertem e adulteram dados históricos para finalidades políticas-ideológicas
                    imediatas. Nesse sentido, acreditamos que iniciativas voltadas à história pública podem, por um
                    lado, ajudar no enfrentamento destas correntes tendenciosas e, por outro, contribuir para a
                    ampliação dos espaços de debates comprometidos com a responsabilidade da pesquisa histórica.
                </p>
                <p>
                    É indispensável destacar que, em momento algum, objetivamos obter qualquer forma de ganho ou
                    benefício com o conteúdo original. Respeitamos profundamente os direitos de propriedade intelectual
                    vinculados a todos os artigos que compõem este acervo e, para garantir a transparência e a devida
                    atribuição, cada artigo selecionado é acompanhado por uma referência clara à sua fonte original no
                    site de origem.
                </p>
                <p>
                    Entendemos a importância de proteger os direitos autorais e estamos abertos ao diálogo. Caso você
                    seja detentor dos direitos sobre algum dos conteúdos e acredite que ele não deveria estar presente
                    neste acervo, pedimos que entre em contato conosco, para que possamos tomar as medidas adequadas.
                </p>
                <p>
                    Ao acessar e utilizar os materiais deste acervo, você reconhece e concorda com os termos mencionados
                    e entende que o uso é de sua inteira responsabilidade. Agradecemos a compreensão e esperamos
                    contribuir de maneira positiva para a difusão do conhecimento e o avanço acadêmico.
                </p>
            </article>
        </section>



        <section class="index">
            <h1>Acesse por categoria</h1>
            <ul>
                <li><a target="_blank" href="./pages/nao_etiquetado/">Não etiquetados</a></li>
                <li><a target="_blank" href="./pages/educacao">Educação</a></li>
                <li><a target="_blank" href="./pages/homossexualidades">Homossexualidades</a></li>
                <li><a target="_blank" href="./pages/conjuracao_baiana">Conjuração Baiana</a></li>
                <li><a target="_blank" href="./pages/mulheres_em_conflitos">Mulheres em Conflitos</a></li>
                <li><a target="_blank" href="./pages/fim_da_guerra">Fim da Guerra</a></li>
                <li><a target="_blank" href="./pages/comida_e_modos_de_comer">Comida e modos de comer</a></li>
                <li><a target="_blank" href="./pages/redemocratizacao">Redemocratização</a></li>
                <li><a target="_blank" href="./pages/feminismos">Feminismos</a></li>
                <li><a target="_blank" href="./pages/antonio_vieira">Antônio Vieira</a></li>
                <li><a target="_blank" href="./pages/canudos">Canudos</a></li>
                <li><a target="_blank" href="./pages/drogas">Drogas</a></li>
                <li><a target="_blank" href="./pages/getulio_vargas">Getúlio Vargas</a></li>
                <li><a target="_blank" href="./pages/trafico_de_escravos">Tráfico de Escravos</a></li>
                <li><a target="_blank" href="./pages/leopoldina">Leopoldina</a></li>
                <li><a target="_blank" href="./pages/primeira_guerra_mundial">Primeira Guerra Mundial</a></li>
                <li><a target="_blank" href="./pages/contestado">Contestado</a></li>
                <li><a target="_blank" href="./pages/descobrimentos">Descobrimentos</a></li>
                <li><a target="_blank" href="./pages/o_golpe_de_1964">O Golpe de 1964</a></li>
                <li><a target="_blank" href="./pages/o_golpe_de_1965">O Golpe de 1965</a></li>
                <li><a target="_blank" href="./pages/o_golpe_de_1966">O Golpe de 1966</a></li>
                <li><a target="_blank" href="./pages/o_golpe_de_1967">O Golpe de 1967</a></li>
                <li><a target="_blank" href="./pages/revolucao_de_1932">Revolução de 1932</a></li>
                <li><a target="_blank" href="./pages/revolucao_de_1933">Revolução de 1933</a></li>
                <li><a target="_blank" href="./pages/revolucao_de_1934">Revolução de 1934</a></li>
                <li><a target="_blank" href="./pages/jesuitas">Jesuítas</a></li>
                <li><a target="_blank" href="./pages/princesa_isabel">Princesa Isabel</a></li>
                <li><a target="_blank" href="./pages/africa_brasil">África Brasil</a></li>
                <li><a target="_blank" href="./pages/astrologia">Astrologia</a></li>
                <li><a target="_blank" href="./pages/d_pedro_i">D. Pedro I</a></li>
                <li><a target="_blank" href="./pages/italianos_do_brasil">Italianos do Brasil</a></li>
                <li><a target="_blank" href="./pages/arqueologia">Arqueologia</a></li>
                <li><a target="_blank" href="./pages/batalhas">Batalhas</a></li>
                <li><a target="_blank" href="./pages/sociedades_secretas">Sociedades Secretas</a></li>
                <li><a target="_blank" href="./pages/fora_da_lei">Fora da Lei</a></li>
                <li><a target="_blank" href="./pages/o_negocio_da_inconfidencia">O Negócio da Inconfidência</a></li>
                <li><a target="_blank" href="./pages/brasil_e_estados_unidos">Brasil e Estados Unidos</a></li>
                <li><a target="_blank" href="./pages/amantes">Amantes</a></li>
                <li><a target="_blank" href="./pages/profecias">Profecias</a></li>
                <li><a target="_blank" href="./pages/integralismo">Integralismo</a></li>
                <li><a target="_blank" href="./pages/animais_de_estimacao">Animais de Estimação</a></li>
                <li><a target="_blank" href="./pages/atentados_politicos">Atentados Políticos</a></li>
                <li><a target="_blank" href="./pages/judeus">Judeus</a></li>
                <li><a target="_blank" href="./pages/cafe">Café</a></li>
                <li><a target="_blank" href="./pages/feiticaria">Feitiçaria</a></li>
                <li><a target="_blank" href="./pages/napoleao">Napoleão</a></li>
                <li><a target="_blank" href="./pages/escravidao">Escravidão</a></li>
                <li><a target="_blank" href="./pages/republica">República</a></li>
                <li><a target="_blank" href="./pages/franca">França</a></li>
                <li><a target="_blank" href="./pages/independencia">Independência</a></li>
                <li><a target="_blank" href="./pages/euclides_da_cunha">Euclides da Cunha</a></li>
                <li><a target="_blank" href="./pages/arabes_no_brasil">Árabes no Brasil</a></li>

            </ul>

        </section>
    </main>


    <footer>
        <p>&copy;2023 Felipe Nunes. Todos os direitos reservados.</p>
    </footer>

    <script>


        var clearButton = document.getElementById("clear")
        var resultsContainer = document.getElementById("searchResults");

        clearButton.addEventListener('click', clear)

        function clear() {
            let search = document.getElementById("searchInput");

            search.value = '';
            location.reload();

        }

        function search() {
            var searchTerm = document.getElementById("searchInput").value.toLowerCase();
            var results = [];

            var subdirectories = [
                "nao_etiquetado",
                "educacao",
                "homossexualidades",
                "conjuracao_baiana",
                "mulheres_em_conflitos",
                "fim_da_guerra",
                "comida_e_modos_de_comer",
                "redemocratizacao",
                "feminismos",
                "antonio_vieira",
                "canudos",
                "drogas",
                "getulio_vargas",
                "trafico_de_escravos",
                "leopoldina",
                "primeira_guerra_mundial",
                "contestado",
                "descobrimentos",
                "o_golpe_de_1964",
                "o_golpe_de_1965",
                "o_golpe_de_1966",
                "o_golpe_de_1967",
                "revolucao_de_1932",
                "revolucao_de_1933",
                "revolucao_de_1934",
                "jesuitas",
                "princesa_isabel",
                "africa_brasil",
                "astrologia",
                "d_pedro_i",
                "italianos_do_brasil",
                "arqueologia",
                "batalhas",
                "sociedades_secretas",
                "fora_da_lei",
                "o_negocio_da_inconfidencia",
                "brasil_e_estados_unidos",
                "amantes",
                "profecias",
                "integralismo",
                "animais_de_estimacao",
                "atentados_politicos",
                "judeus",
                "cafe",
                "feiticaria",
                "napoleao",
                "escravidao",
                "republica",
                "franca",
                "independencia",
                "euclides_da_cunha",
                "arabes_no_brasil"
            ];
            function searchInDirectory(directory) {
                return fetch(`./pages/${directory}/index.html`)
                    .then(response => response.text())
                    .then(content => {
                        var parser = new DOMParser();
                        var htmlDoc = parser.parseFromString(content, 'text/html');
                        var links = htmlDoc.querySelectorAll('a[href$=".html"]');
                        var promises = [];

                        links.forEach(function (link) {
                            var filePath = link.getAttribute("href");

                            var resultPath = `./pages/${directory}/${filePath}`;

                            var fetchPromise = fetch(resultPath)
                                .then(response => response.text())
                                .then(fileContent => {
                                    if (fileContent.toLowerCase().includes(searchTerm)) {
                                        results.push({ title: link.textContent, link: resultPath });
                                    }
                                })
                                .catch(error => {
                                    console.error("erro ao buscar arquivo " + resultPath, error);
                                });

                            promises.push(fetchPromise);
                        });

                        return Promise.all(promises);
                    })
                    .catch(error => {
                        console.error("erro ao buscar diretório " + directory, error);
                    });
            }

            results = [];

            Promise.all(subdirectories.map(searchInDirectory))
                .then(() => {
                    displayResults(results);
                });
        }

        function displayResults(results) {

            resultsContainer.innerHTML = "";

            if (results.length === 0) {
                resultsContainer.innerHTML = "nenhum resultado encontrado.";
            } else {
                results.forEach(function (result) {
                    var resultLink = document.createElement('a');
                    resultLink.textContent = result.title;

                    var resultPath = result.link;
                    resultLink.href = resultPath;
                    resultLink.target = "_blank";
                    resultsContainer.appendChild(resultLink);
                });
            }
        }

        countArticlesAndTags();

        function countArticlesAndTags() {
            var articleCount = 0;
            var tagCount = subdirectories.length;

            function countArticlesInDirectory(directory) {
                return fetch(`./pages/${directory}/index.html`)
                    .then(response => response.text())
                    .then(content => {
                        var parser = new DOMParser();
                        var htmlDoc = parser.parseFromString(content, 'text/html');
                        var links = htmlDoc.querySelectorAll('a[href$=".html"]');
                        articleCount += links.length;
                    })
                    .catch(error => {
                        console.error("Erro ao contar artigos no diretório " + directory, error);
                    });
            }

            // Adicionei a contagem de artigos
            Promise.all(subdirectories.map(countArticlesInDirectory))
                .then(() => {
                    displayCounts(articleCount, tagCount);
                });
        }

        // Adicionei a função para exibir as contagens
        function displayCounts(articleCount, tagCount) {
            var articleCountElement = document.getElementById("articleCount");
            var tagCountElement = document.getElementById("tagCount");

            articleCountElement.textContent = articleCount;
            tagCountElement.textContent = tagCount;
        }

    </script>
</body>

</html>