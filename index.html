<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles/general.css">
    <title>coletânea RHBN</title>
</head>

<body>
    <header>
        <div id="search">
            <input type="text" id="searchInput" placeholder="Digite a palavra a ser encontrada">
            <button onclick="search()">Buscar</button>
        </div>
        <div id="searchResults"></div>
    </header>


    <main>



        <section>
            <div>
                <div>
                    <h1>Disclaimer</h1>
                </div>
                <h2>Acervo Revista de História da Biblioteca Nacional do Web Archive</h2>
            </div>
            <article>
                <p>
                    Este site foi criado com a finalidade de preservar e disponibilizar os artigos da Revista de
                    História da Biblioteca Nacional que se encontram originalmente disponíveis no site <a
                        target="_blank" target="_blank" rel="external"
                        href="https://web.archive.org/web/20160802124509/http://www.revistadehistoria.com.br/">Web
                        Archive</a>. A motivação para esta coletânea surgiu diante das dificuldades enfrentadas no
                    acesso aos conteúdos do próprio Web Archive. Nosso intuito principal é proporcionar um acesso mais
                    democrático a tais informações, priorizando o uso didático e acadêmico desses materiais.
                </p>
                <p>
                    Acreditamos que exista uma profunda necessidade, em nossa conjuntura, de posturas que valorizem os
                    saberes acadêmicos e contribuam com a divulgação científica. A crescente onda de desinformação nesta
                    era de pós-verdade tem propiciado o surgimento de narrativas negacionistas e revisionistas que,
                    ardilosamente, subvertem e adulteram dados históricos para finalidades políticas-ideológicas
                    imediatas. Nesse sentido, acreditamos que iniciativas voltadas à história pública podem, por um
                    lado, ajudar no enfrentamento destas correntes tendenciosas e, por outro, contribuir para a
                    ampliação dos espaços de debates comprometidos com a responsabilidade da pesquisa histórica.
                </p>
                <p>
                    É indispensável destacar que, em momento algum, objetivamos obter qualquer forma de ganho ou
                    benefício com o conteúdo original. Respeitamos profundamente os direitos de propriedade intelectual
                    vinculados a todos os artigos que compõem este acervo e, para garantir a transparência e a devida
                    atribuição, cada artigo selecionado é acompanhado por uma referência clara à sua fonte original no
                    site de origem.
                </p>
                <p>
                    Entendemos a importância de proteger os direitos autorais e estamos abertos ao diálogo. Caso você
                    seja detentor dos direitos sobre algum dos conteúdos e acredite que ele não deveria estar presente
                    neste acervo, pedimos que entre em contato conosco, para que possamos tomar as medidas adequadas.
                </p>
                <p>
                    Ao acessar e utilizar os materiais deste acervo, você reconhece e concorda com os termos mencionados
                    e entende que o uso é de sua inteira responsabilidade. Agradecemos a compreensão e esperamos
                    contribuir de maneira positiva para a difusão do conhecimento e o avanço acadêmico.
                </p>
            </article>
        </section>


        <section class="index">
            <h1>Acesse por categoria</h1>
            <ul>
                <li><a target="_blank" href="./pages/nao_etiquetado/">Não etiquetados</a></li>
                <li><a target="_blank" href="./pages/educação">Educação</a></li>
                <li><a target="_blank" href="./pages/homossexualidades">Homossexualidades</a></li>
                <li><a target="_blank" href="./pages/conjuração_baiana">Conjuração Baiana</a></li>
                <li><a target="_blank" href="./pages/mulheres_em_conflitos">Mulheres em Conflitos</a></li>
                <li><a target="_blank" href="./pages/fim_da_guerra">Fim da Guerra</a></li>
                <li><a target="_blank" href="./pages/comida_e_modos_de_comer">Comida e modos de comer</a></li>
                <li><a target="_blank" href="./pages/redemocratização">Redemocratização</a></li>
                <li><a target="_blank" href="./pages/feminismos">Feminismos</a></li>
                <li><a target="_blank" href="./pages/antônio_vieira">Antônio Vieira</a></li>
                <li><a target="_blank" href="./pages/canudos">Canudos</a></li>
                <li><a target="_blank" href="./pages/drogas">Drogas</a></li>
                <li><a target="_blank" href="./pages/getúlio_vargas">Getúlio Vargas</a></li>
                <li><a target="_blank" href="./pages/tráfico_de_escravos">Tráfico de Escravos</a></li>
                <li><a target="_blank" href="./pages/le opoldina">Leopoldina</a></li>
                <li><a target="_blank" href="./pages/primeira_guerra_mundial">Primeira Guerra Mundial</a></li>
                <li><a target="_blank" href="./pages/contestado">Contestado</a></li>
                <li><a target="_blank" href="./pages/descobrimentos">Descobrimentos</a></li>
                <li><a target="_blank" href="./pages/o_golpe_de_1964">O Golpe de 1964</a></li>
                <li><a target="_blank" href="./pages/o_golpe_de_1965">O Golpe de 1965</a></li>
                <li><a target="_blank" href="./pages/o_golpe_de_1966">O Golpe de 1966</a></li>
                <li><a target="_blank" href="./pages/o_golpe_de_1967">O Golpe de 1967</a></li>
                <li><a target="_blank" href="./pages/revolução_de_1932">Revolução de 1932</a></li>
                <li><a target="_blank" href="./pages/revolução_de_1933">Revolução de 1933</a></li>
                <li><a target="_blank" href="./pages/revolução_de_1934">Revolução de 1934</a></li>
                <li><a target="_blank" href="./pages/jesuítas">Jesuítas</a></li>
                <li><a target="_blank" href="./pages/princesa_isabel">Princesa Isabel</a></li>
                <li><a target="_blank" href="./pages/áfrica_brasil">África Brasil</a></li>
                <li><a target="_blank" href="./pages/astrologia">Astrologia</a></li>
                <li><a target="_blank" href="./pages/d._pedro_i/">D. Pedro I</a></li>
                <li><a target="_blank" href="./pages/italianos_do_brasil">Italianos do Brasil</a></li>
                <li><a target="_blank" href="./pages/arqueologia">Arqueologia</a></li>
                <li><a target="_blank" href="./pages/batalhas">Batalhas</a></li>
                <li><a target="_blank" href="./pages/sociedades_secretas">Sociedades Secretas</a></li>
                <li><a target="_blank" href="./pages/fora_da_lei">Fora da Lei</a></li>
                <li><a target="_blank" href="./pages/o_negócio_da_inconfidência">O Negócio da Inconfidência</a></li>
                <li><a target="_blank" href="./pages/brasil_e_estados_unidos">Brasil e Estados Unidos</a></li>
                <li><a target="_blank" href="./pages/amantes">Amantes</a></li>
                <li><a target="_blank" href="./pages/profecias">Profecias</a></li>
                <li><a target="_blank" href="./pages/integralismo">Integralismo</a></li>
                <li><a target="_blank" href="./pages/animais_de_estimação">Animais de Estimação</a></li>
                <li><a target="_blank" href="./pages/atentados_políticos">Atentados Políticos</a></li>
                <li><a target="_blank" href="./pages/judeus">Judeus</a></li>
                <li><a target="_blank" href="./pages/café">Café</a></li>
                <li><a target="_blank" href="./pages/feitiçaria">Feitiçaria</a></li>
                <li><a target="_blank" href="./pages/napoleão">Napoleão</a></li>
                <li><a target="_blank" href="./pages/escravidão">Escravidão</a></li>
                <li><a target="_blank" href="./pages/república">República</a></li>
                <li><a target="_blank" href="./pages/frança">França</a></li>
                <li><a target="_blank" href="./pages/independência">Independência</a></li>
                <li><a target="_blank" href="./pages/euclides_da_cunha">Euclides da Cunha</a></li>
                <li><a target="_blank" href="./pages/árabes_no_brasil">Árabes no Brasil</a></li>
            </ul>

        </section>
    </main>


    <footer>
        <p>&copy;2023 Felipe Nunes. Todos os direitos reservados.</p>
    </footer>

    <script> //resolver problemas do href (subdirectories + page)
        function search() {
            var searchTerm = document.getElementById("searchInput").value.toLowerCase();
            var results = [];

            var subdirectories = [
                "nao_etiquetado",
                "educação",
                "homossexualidades",
                "conjuração_baiana",
                "mulheres_em_conflitos",
                "fim_da_guerra",
                "comida_e_modos_de_comer",
                "redemocratização",
                "feminismos",
                "antônio_vieira",
                "canudos",
                "drogas",
                "getúlio_vargas",
                "tráfico_de_escravos",
                "leopoldina",
                "primeira_guerra_mundial",
                "contestado",
                "descobrimentos",
                "o_golpe_de_1964",
                "o_golpe_de_1965",
                "o_golpe_de_1966",
                "o_golpe_de_1967",
                "revolução_de_1932",
                "revolução_de_1933",
                "revolução_de_1934",
                "jesuítas",
                "princesa_isabel",
                "áfrica_brasil",
                "astrologia",
                "d._pedro_i",
                "italianos_do_brasil",
                "arqueologia",
                "batalhas",
                "sociedades_secretas",
                "fora_da_lei",
                "o_negócio_da_inconfidência",
                "brasil_e_estados_unidos",
                "amantes",
                "profecias",
                "integralismo",
                "animais_de_estimação",
                "atentados_políticos",
                "judeus",
                "café",
                "feitiçaria",
                "napoleão",
                "escravidão",
                "república",
                "frança",
                "independência",
                "euclides_da_cunha",
                "árabes_no_brasil"
            ];
            function sanitizePath(path) {
        // Remover caracteres especiais do caminho
        return path.replace(/[^a-zA-Z0-9/_-]/g, '');
    }

    function searchInDirectory(directory) {
        return fetch(`./pages/${directory}`)
            .then(response => response.text())
            .then(content => {
                var parser = new DOMParser();
                var htmlDoc = parser.parseFromString(content, 'text/html');
                var links = htmlDoc.querySelectorAll('a[href$=".html"]');
                var promises = [];

                links.forEach(function (link) {
                    var filePath = link.getAttribute("href");

                    // Corrigir o caminho do arquivo resultante
                    var resultPath = sanitizePath(filePath.replace('./pages/', ''));

                    var fetchPromise = fetch(resultPath)
                        .then(response => response.text())
                        .then(fileContent => {
                            if (fileContent.toLowerCase().includes(searchTerm)) {
                                results.push({ title: link.textContent, link: resultPath, directory: directory });
                            }
                        })
                        .catch(error => {
                            console.error("Erro ao buscar arquivo " + resultPath, error);
                        });

                    promises.push(fetchPromise);
                });

                return Promise.all(promises);
            })
            .catch(error => {
                console.error("Erro ao buscar diretório " + directory, error);
            });
    }

    // Limpar resultados antes de uma nova busca
    results = [];

    // Iniciar busca em cada diretório e, após tudo, exibir resultados
    Promise.all(subdirectories.map(searchInDirectory))
        .then(() => {
            displayResults(results);
        });
}

function displayResults(results) {
    var resultsContainer = document.getElementById("searchResults");
    resultsContainer.innerHTML = "";

    if (results.length === 0) {
        resultsContainer.innerHTML = "Nenhum resultado encontrado.";
    } else {
        results.forEach(function (result) {
            var resultLink = document.createElement('a');
            resultLink.textContent = result.title;

            // Corrigir o caminho do link resultante
            var resultPath = `./pages/${result.directory}/${result.link}`;
            resultLink.href = resultPath;
            resultLink.target = "_blank";
            resultsContainer.appendChild(resultLink);
            resultsContainer.appendChild(document.createElement('br'));
        });
    }
}
    </script>
</body>

</html>